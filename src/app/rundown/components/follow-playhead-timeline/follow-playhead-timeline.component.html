<sofie-timeline-markers
    [time]="time - playheadInAnimationDurationInMs | maximum: 0"
    [pixelsPerSecond]="pixelsPerSecond"
></sofie-timeline-markers>

<div class="parts">
    <sofie-offsetable-part
            *ngFor="let previousPart of previousParts"
            [part]="previousPart"
            [pieceLayers]="pieceLayers"
            [pixelsPerSecond]="pixelsPerSecond"
            [offsetDurationInMs]="getPreviousPartOffsetInMs(previousPart)"
            [minimumDisplayDurationInMs]="0"
            (click)="setPartAsNext(previousPart)"
    ></sofie-offsetable-part>

    <sofie-offsetable-part
            *ngIf="onAirPart"
            [part]="onAirPart"
            [pieceLayers]="pieceLayers"
            [pixelsPerSecond]="pixelsPerSecond"
            [offsetDurationInMs]="getOnAirPartOffsetInMs()"
            [minimumDisplayDurationInMs]="playheadInAnimationDurationInMs + postPlayheadDurationInMs"
            [prePlayheadDurationInMs]="this.playheadInAnimationDurationInMs"
    ></sofie-offsetable-part>

    <sofie-offsetable-part
            *ngFor="let futurePart of futureParts"
            [part]="futurePart"
            [pieceLayers]="pieceLayers"
            [pixelsPerSecond]="pixelsPerSecond"
            [offsetDurationInMs]="0"
            [minimumDisplayDurationInMs]="0"
            (click)="setPartAsNext(futurePart)"
    ></sofie-offsetable-part>

    <sofie-segment-end-indicator
            [lastPartInSegment]="segment.parts[segment.parts.length - 1]"
    ></sofie-segment-end-indicator>
</div>

<sofie-timeline-playhead
        [time]="time | minimum: playheadInAnimationDurationInMs"
        [pixelsPerSecond]="pixelsPerSecond"
></sofie-timeline-playhead>















<!--<sofie-timeline-markers
    [time]="time - playheadInsetDuration | maximum: 0"
    [pixelsPerSecond]="pixelsPerSecond"
></sofie-timeline-markers>

<div style="display: inline-flex;">

    <sofie-part
        *ngIf="previousParts.length > 0"
        [rundownId]="segment.rundownId"
        [part]="previousParts[0]"
        [pieceLayers]="pieceLayers"
        [pixelsPerSecond]="pixelsPerSecond"
        [time]="time"
        [minimumDisplayDuration]="0"
        [timeOffset]="getFirstPreviousPartTimeOffset(previousParts[0])"
    ></sofie-part>
    <sofie-part
        *ngFor="let previousPart of previousParts.slice(1)"
        [rundownId]="segment.rundownId"
        [part]="previousPart"
        [pieceLayers]="pieceLayers"
        [pixelsPerSecond]="pixelsPerSecond"
        [time]="previousPart.isOnAir ? time : 0"
        [minimumDisplayDuration]="0"
        [timeOffset]="0"
    ></sofie-part>
    <sofie-part
        *ngIf="onAirPart"
        [rundownId]="segment.rundownId"
        [part]="onAirPart"
        [pieceLayers]="pieceLayers"
        [pixelsPerSecond]="pixelsPerSecond"
        [time]="0"
        [minimumDisplayDuration]="this.playheadInsetDuration + this.playheadPostDisplayDuration"
        [timeOffset]="onAirPartTimeOffset"
    ></sofie-part>
    <sofie-part
        *ngFor="let part of futureParts"
        class="c-follow-playhead-timeline-component"
        [rundownId]="segment.rundownId"
        [part]="part"
        [pieceLayers]="pieceLayers"
        [pixelsPerSecond]="pixelsPerSecond"
        [time]="0"
    ></sofie-part>
    <sofie-segment-end-indicator
            [lastPartInSegment]="segment.parts[segment.parts.length - 1]"
    ></sofie-segment-end-indicator>
</div>

<sofie-timeline-playhead
    [time]="time | minimum: playheadInsetDuration"
    [pixelsPerSecond]="pixelsPerSecond"
></sofie-timeline-playhead>

-->
