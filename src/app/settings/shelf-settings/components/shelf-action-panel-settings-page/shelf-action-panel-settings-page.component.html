<sofie-settings-page [title]="title">
    <sofie-card *ngIf="shelfConfiguration; else loading">
        <ng-container cardHeader>
            <div>
                Insert search filter and multiselect here
            </div>
            <sofie-button-group>
                <sofie-button (click)="openCreateActionPanel()" i18n>global.create-new.label</sofie-button>
                <sofie-json-export-button [exportData]="shelfConfiguration" [exportedFileName]="shelfConfigurationFileName"></sofie-json-export-button>
                <sofie-json-import-button (onUpload)="shelfConfigurationUploaded($event)" [validator]="validateShelfConfiguration.bind(this)"></sofie-json-import-button>
                <sofie-button *ngIf="selectedActionPanels.size > 0" [type]="'DANGER'" (click)="deleteSelectedActionPanels()" i18n>global.delete-selected.label</sofie-button>
            </sofie-button-group>
        </ng-container>

        <sofie-table>
            <th tableHeader class="checkbox-column p-2">
                <sofie-checkbox [isSelected]="isAllActionPanelsSelected()" (onToggle)="toggleAllActionPanels($event)"></sofie-checkbox>
            </th>
            <th tableHeader *ngFor="let header of headers" (click)="toggleTableHeaderForSorting(header)">
                {{header.name}}
                 <sofie-icon-button [ngClass]="{ 'hidden': !header.isBeingUsedForSorting }"  [iconButton]="getSortIcon(header)" [iconButtonSize]="IconButtonSize.XS"></sofie-icon-button>
            </th>
            <tr tableBody *ngFor="let actionPanel of shelfConfiguration.actionPanelConfigurations">
                <td class="checkbox-column">
                    <sofie-checkbox [isSelected]="isActionPanelSelected(actionPanel)" (onToggle)="toggleActionPanel($event, actionPanel)"></sofie-checkbox>
                </td>
                <td>
                    {{actionPanel.name}}
                </td>
                <td>
                    {{actionPanel.rank}}
                </td>
                <td>
                    <sofie-rounded-box *ngFor="let filter of actionPanel.actionFilter" class="{{ filter | actionContentCssColor }} me-2">
                        {{ filter | translationActionType }}
                    </sofie-rounded-box>
                </td>
                <td>
                    <sofie-button-group class="align-table-data-end pe-5">
                        <sofie-icon-button [iconButton]="IconButton.PEN" [iconButtonSize]="IconButtonSize.L" [tooltip]="'Edit Action Panel'" (click)="openEditActionPanel(actionPanel)"></sofie-icon-button>
                        <sofie-icon-button [iconButton]="IconButton.TWO_SHEETS_COPY" [iconButtonSize]="IconButtonSize.L" [tooltip]="'Copy Action Panel'" (click)="duplicateActionPanel(actionPanel)"></sofie-icon-button>
                        <sofie-icon-button [iconButton]="IconButton.TRASH_CAN" [iconButtonSize]="IconButtonSize.L" [tooltip]="'Delete Action Panel'" (click)="deleteActionPanel(actionPanel)"></sofie-icon-button>
                    </sofie-button-group>
                </td>
            </tr>
        </sofie-table>
        <hr>
        <sofie-action-panel-list [shelfConfiguration]="shelfConfiguration"></sofie-action-panel-list>
    </sofie-card>

    <ng-template #loading>
        <sofie-loading></sofie-loading>
    </ng-template>
</sofie-settings-page>
